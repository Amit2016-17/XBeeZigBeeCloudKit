<div class="widget-holder">
    <div class="widget-header">
        <div class="pull-right" showonhovergrandparent>
            <a ui-sref="widget_settings({widget_id: widget.id})" title="Widget Settings">
                <i class="icon-cog icon-large"></i>
            </a>
            &nbsp;
            <a ui-sref="view_code({widget_id: widget.id})" title="View Code">
                <i class="icon-code icon-large"></i>
            </a>
            &nbsp;
        </div>

        <p class="widget-header-text">{{widget.label}}</p>
    </div>

    <hr>

    <div class="widget-inner-wrapper">
        <div class="widgetwrap" state="widgetState"></div>

        <div class="widget-footer ng-cloak" ng-if="widget.$type != 'error'">
            <img src="/static/assets/xbee_small.png" />
            <span ng-if="get_node_id(widget.radio)" tooltip="{{widget.radio}}"
                    tooltip-placement="bottom">
                {{ get_node_id(widget.radio) }}
            </span>
            <span ng-if="!get_node_id(widget.radio)">
                {{ widget.radio }}
            </span>
        </div>

        <div class="widget-progress-overlay" ng-if="!deviceConnected || widgetState">
            <p ng-if="!deviceConnected">Device Disconnected</p>
            <p ng-if="deviceConnected" ng-switch="widgetState">
                <span ng-switch-when="1">
                    <i class="icon-spin icon-spinner icon-2x"
                        style="margin-top: 10px"
                        title="Sending data..."></i>
                </span>
                <span ng-switch-when="2">Waiting for device response...</span>
                <span ng-switch-default="">Unknown widget state {{widgetState}}</span>
            </p>
        </div>
    </div>
</div>
